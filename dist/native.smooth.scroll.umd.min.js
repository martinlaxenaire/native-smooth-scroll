function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).SmoothScroll={})}(this,(function(t){"use strict";var e=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.container,o=e.inertia,n=void 0===o?.1:o,r=e.threshold,s=void 0===r?.5:r,l=e.useRaf,c=void 0!==l&&l;_classCallCheck(this,t),this.container=i,this.container?(this.inertia=n,this.threshold=s,this._useRaf=c,this._raf=null,this._isScrolling=!1,this.scroll={},this.store={},this.resize(),this.init()):console.warn("Can't init SmoothScroll class because the container passed does not exist:",i)}return _createClass(t,[{key:"init",value:function(){var t=this;this.container.style.position="fixed",this.container.style.top=0,this.container.style.left=0,this.container.style.width="100%",0!==this.scroll.current&&(this.scrollTo(this.scroll.current),setTimeout((function(){t.emitScroll()}),0)),window.addEventListener("scroll",(function(){return t.scrollEvent()})),this._useRaf&&this.animate()}},{key:"update",value:function(){this.store.documentHeight=this.container.clientHeight,this.store.windowHeight=window.innerHeight,document.body.style.height=this.store.documentHeight+"px"}},{key:"resize",value:function(){this.update();var t=window.pageYOffset;this.scroll={target:t,current:t,velocity:0},this.scrollTo(this.scroll.current)}},{key:"lerp",value:function(t,e,i){return((1-i)*t+i*e).toFixed(2)}},{key:"scrollEvent",value:function(){this.scroll.target=window.pageYOffset}},{key:"emitScroll",value:function(){this.onScrollCallback&&this.onScrollCallback({current:this.scroll.current,target:this.scroll.target,velocity:this.scroll.velocity})}},{key:"scrollTo",value:function(t){t=Math.max(0,Math.min(t,this.store.documentHeight-this.store.windowHeight)),this.scroll.current=t,this.scroll.target=t,this.scroll.velocity=0,window.scrollTo(0,t),this.updatePosition(),this.emitScroll()}},{key:"updatePosition",value:function(){this.container.style.transform="translateY("+-this.scroll.current+"px)"}},{key:"render",value:function(){var t=this.scroll.current;this.scroll.current=this.lerp(this.scroll.current,this.scroll.target,this.inertia),this.scroll.velocity=this.scroll.current-t,Math.abs(this.scroll.current-this.scroll.target)>=this.threshold?(this._isScrolling=!0,this.updatePosition(),this.emitScroll()):this._isScrolling&&(this._isScrolling=!1,this.scroll.current=this.scroll.target,this.scroll.velocity=0,this.updatePosition(),this.emitScroll())}},{key:"animate",value:function(){var t=this;this.render(),this._raf=window.requestAnimationFrame((function(){return t.animate()}))}},{key:"onScroll",value:function(t){t&&(this.onScrollCallback=t)}},{key:"destroy",value:function(){this._raf&&window.cancelAnimationFrame(this._raf),window.removeEventListener(this.scrollEvent)}}]),t}();t.SmoothScroll=e,Object.defineProperty(t,"__esModule",{value:!0})}));
